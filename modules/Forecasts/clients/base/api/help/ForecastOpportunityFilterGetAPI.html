<!--
/*
 * Your installation or use of this SugarCRM file is subject to the applicable
 * terms available at
 * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.
 * If you do not agree to all of the applicable terms or do not have the
 * authority to bind the entity as an authorized representative, then do not
 * install or use this SugarCRM file.
 *
 * Copyright (C) SugarCRM Inc. All rights reserved.
 */
-->
<h2>Overview</h2>
<span class="lead">
    List of filtered opportunity records for forecast list.
</span>

<h2>Summary</h2>
<span class="lead">
    This endpoint will return a set of opportunities filtered by an expression. The filter will also apply additional
    filters based on <CODE>user_id</CODE>, <CODE>type</CODE>, <CODE>time_period
</CODE>
</span>

<h2>Request Arguments</h2>
<table class="table table-hover">
    <thead>
    <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Required</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>
            filter
        </td>
        <td>
            String
        </td>
        <td>
            The filter expression. Filter expressions are explained below.
        </td>
        <td>
            False
        </td>
    </tr>
    <tr>
        <td>
            user_id
        </td>
        <td>
            String
        </td>
        <td>
            The id of a user. No results are returned if this id is not provided.
        </td>
        <td>
            False
        </td>
    </tr>
    <tr>
        <td>
            type
        </td>
        <td>
            String
        </td>
        <td>
            Determines if Direct or Rollup forecast opportunities are returned. Defaults to <code>Direct</code> if an invalid
            or no option is provided.
            <ol>
                <li>
                    <code>Direct</code> - Returns opportunities assigned to the user in <code>user_id</code>.
                </li>
                <li>
                    <code>Rollup</code> - Returns opportunities assigned to all users within the reports to hierarchy of
                    the user in <code>user_id</code>.
                </li>
            </ol>
        </td>
        <td>
            False
        </td>
    </tr>
    <tr>
        <td>
            time_period
        </td>
        <td>
            String
        </td>
        <td>
            The id of a time period record. If this is not provided results for the current time period are
            returned.
        </td>
        <td>
            False
        </td>
    </tr>
    <tr>
        <td>
            filter_id
        </td>
        <td>
            String
        </td>
        <td>
            Identifier for a preexisting filter. If filter is also set, the two
            filters are joined with an <code>AND</code>.
        </td>
        <td>
            False
        </td>
    </tr>
    <tr>
        <td>
            max_num
        </td>
        <td>
            Integer
        </td>
        <td>
            A maximum number of records to return. Default is 20.
        </td>
        <td>
            False
        </td>
    </tr>
    <tr>
        <td>
            offset
        </td>
        <td>
            Integer
        </td>
        <td>
            The number of records to skip over before records are returned. Default is 0.
        </td>
        <td>
            False
        </td>
    </tr>
    <tr>
        <td>
            fields
        </td>
        <td>
            String
        </td>
        <td>
            Comma delimited list of fields to return. Each field may be represented either by string, or by map
            containing field name and additional field parameters (applicable to link and collection fields).
            The fields <code>id</code> and <code>date_modified</code> will always be returned.
            <br>
            Example: <code>name,account_type,description,{"name":"opportunities","fields":["id","name","sales_status"],"order_by":"date_closed:desc"}</code>
            <br>
            For more details on additional field parameters, see
            <a onclick="openLongHelp('98b6808bff391a8b1a8d43cc55852715');">Relate API</a> and
            <a onclick="openLongHelp('a6730e5971c12fdb7dbc30366258d97b');">Collection API</a>.
        </td>
        <td>
            False
        </td>
    </tr>
    <tr>
        <td>
            view
        </td>
        <td>
            String
        </td>
        <td>
            Instead of defining the fields argument, the view argument can be used instead. The field list is
            constructed at the server side based on the view definition which is requested. This argument can be used
            in combination with the fields argument. Common views are "record" and "list".
            <br>
            Example: <code>record</code>
        </td>
        <td>
            False
        </td>
    </tr>
    <tr>
        <td>
            order_by
        </td>
        <td>
            String
        </td>
        <td>
            How to sort the returned records, in a comma delimited list with the direction appended to the column name
            after a colon.
            <br>
            Example: <code>name:DESC,account_type:DESC,date_modified:ASC</code>
        </td>
        <td>
            False
        </td>
    </tr>
    <tr>
        <td>
            q
        </td>
        <td>
            String
        </td>
        <td>
            A search expression, will search on this module. Cannot be used at the same time as a filter expression or id.
        </td>
        <td>
            False
        </td>
    </tr>
    <tr>
        <td>
            deleted
        </td>
        <td>
            Boolean
        </td>
        <td>
            Boolean to show deleted records in the result set.
        </td>
        <td>
            False
        </td>
    </tr>
    <tr>
        <td>
            nulls_last
        </td>
        <td>
            Boolean
        </td>
        <td>
            Boolean to return records with null values in order_by fields last in the result set.
        </td>
        <td>
            False
        </td>
    </tr>
    </tbody>
</table>

<h5>Example</h5>
<pre class="pre-scrollable">
{
    "filter":[
        {
            "name":{
                "$starts":"Nelson Inc"
            }
        }
    ],
    "user_id":"seed_jim_id",
    "type":"Rollup",
    "time_period":"50252618-b116-11ec-ae2e-acde48001122"
}
</pre>
</div>

<h3>Response</h3>
<pre class="pre-scrollable">
{
   "next_offset":-1,
   "records":[
      {
         "id":"fa300a0e-0ad1-b322-9601-512d0983c19a",
         "name":"Dale Spivey",
         "date_modified":"2013-02-28T05:03:00+00:00",
         "description":"",
         "opportunities": [
            {
               _module: "Opportunities",
               "id": "b0701501-1fab-8ae7-3942-540da93f5017",
               "name": "360 Vacations - 228 Units",
               "date_modified": "2014-09-08T16:05:00+03:00",
               "sales_status": "New"
            },
         ],
         "_acl": {
            "fields": {
            }
         }
      },
      {
         "id":"95e17367-9b3d-0e26-22dc-512d0961fedf",
         "name":"Florence Haddock",
         "date_modified":"2013-02-26T19:12:00+00:00",
         "description":"",
         "opportunities": [
            {
               _module: "Opportunities"
               date_modified: "2014-09-08T16:05:00+03:00"
               id: "9ce7c088-8ee4-7cd3-18f1-540da944d4c0"
               name: "360 Vacations - 312 Units"
               sales_status: "New"
            },
         ],
         "_acl": {
            "fields": {
            }
         }
      }
   ]
}
</pre>

<h2>Change Log</h2>
<table class="table table-hover">
    <tr>
        <th>Version</th>
        <th>Change</th>
    </tr>
    <tr>
        <td>
            v11_17
        </td>
        <td>
            Added <code>forecastOpportunities</code> GET endpoint.
        </td>
    </tr>
</table>
