{{!--
/*
 * Your installation or use of this SugarCRM file is subject to the applicable
 * terms available at
 * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.
 * If you do not agree to all of the applicable terms or do not have the
 * authority to bind the entity as an authorized representative, then do not
 * install or use this SugarCRM file.
 *
 * Copyright (C) SugarCRM Inc. All rights reserved.
 */
--}}

<div class="flex dashlet-group-filter-widget mb-3 {{#if _disabledACL}}disabled-group{{/if}}">
    <div class="flex flex-col w-full" data-action="dashlet-group-widget">
        {{#if _disabledACL}}
            <h5 class="font-bold mx-3 mt-1.5">{{_groupLabel}}</h5>
            <label class="text-center mt-3 mx-5">{{str "LBL_NO_PERMISSION_TO_FILTER" module}}</label>
        {{else}}
            {{#if _editMode}}
                <div class="filter-widget-headerpane">
                    <div class="filter-widget-toolbar flex self-end mt-1.5 mr-3"  data-container="expanded-filter-group">
                        <i class="sicon sicon-chevron-up mr-2 dashlet-collapse-group invisible" data-action="collapse-group" rel="tooltip" data-bs-placement="bottom" title="{{str "LBL_DASHLET_TOGGLE"}}"></i>
                        <i class="sicon sicon-close dashlet-remove-group invisible" data-action="remove-group" rel="tooltip" data-bs-placement="bottom" title="{{str "LBL_DASHLET_REMOVE_LABEL"}}"></i>
                    </div>
                    <div class="filter-widget-value mb-1.5">
                        <div class="collapsed-filter-group flex ml-3 mt-1.5 hidden" data-container="collapsed-filter-group">
                            <div class="font-bold">{{_groupLabel}} <span class='items-selected-nr'>{{_nbItemsSelected}}</span></div>
                            <div class="flex">
                                <i class="sicon mr-2 sicon-chevron-up dashlet-collapse-group invisible" data-action="collapse-group" rel="tooltip" data-bs-placement="bottom" title="{{str "LBL_DASHLET_TOGGLE"}}"></i>
                                <i class="sicon mr-2 sicon-close dashlet-remove-group invisible" data-action="remove-group" rel="tooltip" data-bs-placement="bottom" title="{{str "LBL_DASHLET_REMOVE_LABEL"}}"></i>
                            </div>
                        </div>
                        <div class="flex mt-1.5 mb-1 mx-3" data-container="expanded-filter-group">
                            <input class="w-full" type="text" data-action="new-group-name" value="{{_groupLabel}}" placeholder="{{str 'LBL_NAME'}}">
                        </div>
                        <div class="flex-row items-center m-0.75 mx-3 mt-1.5 mb-0 dashboard-group-edit-name dashboard-group-edit-label" data-tooltip="filter-summary" rel="tooltip" >
                            <span>
                                <h5 class="runtime-filter-summary-text max-h-[2rem] mb-0 overflow-hidden w-full"></h5>
                            </span>
                        </div>
                    </div>
                </div>
                {{#if _isEmptyGroup}}
                    <label class="mt-3 mx-3 empty-group-message">{{str "LBL_SELECT_AVAILABLE_FILTERS" module}}</label>
                {{else}}
                    <div class="dashboard-filter-group-container overflow-y-auto flex flex-col items-center" data-container="fields-container">
                        {{#each _groupFields}}
                            {{partial 'dashboard-filter-group-field' ../this this}}
                        {{/each}}
                    </div>
                {{/if}}
                <div data-container="operators-container"></div>
            {{else}}
                <div class="filter-widget-group-headerpane mb-1.5" data-action="collapse-group">
                    <div class="collapsed-filter-group flex mx-3 mt-1.5">
                        <div class="font-bold">{{_groupLabel}} <span class='items-selected-nr'>{{_nbItemsSelected}}</span></div>
                        <div class="flex">
                            <i class="sicon sicon-chevron-up dashlet-collapse-group invisible" data-action="collapse-group" rel="tooltip" data-bs-placement="bottom" title="{{str "LBL_DASHLET_TOGGLE"}}"></i>
                        </div>
                    </div>
                    <div class="flex-row items-center m-0.75 ml-2.5 mt-1.5 mb-0 pb-0.25" data-tooltip="filter-summary" rel="tooltip">
                        <span>
                            <h5 class="runtime-filter-summary-text mb-0 max-h-[2rem] overflow-hidden w-full"></h5>
                        </span>
                    </div>
                </div>
                <div data-container="operators-container"></div>
            {{/if}}
        {{/if}}
    </div>
</div>
